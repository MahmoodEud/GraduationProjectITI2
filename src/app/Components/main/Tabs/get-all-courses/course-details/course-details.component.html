<div class="container py-5">
  <!-- Loading Spinner -->
  @if (isLoading) {
    <div class="loading-spinner text-center my-5">
      <div class="loading-content">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="loading-text mt-3">جاري تحميل تفاصيل الكورس...</p>
      </div>
    </div>
  }

  <!-- Error Message -->
  @if (errorMessage && !isLoading) {
    <div class="alert alert-danger error-alert text-center my-4" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      {{ errorMessage }}
    </div>
  }

  <!-- Course Details -->
  @if (!isLoading && !errorMessage && course) {
    <div class="course-details card shadow-lg">
      <div class="row g-0">
        <div class="col-lg-5 col-md-6">
          <div class="image-container position-relative">
            <img
              [src]="getImageUrl(course.picturalUrl || 'default-image.jpg')"
              alt="{{ course.title }}"
              class="course-image img-fluid w-100 h-100"
              (error)="handleImageError($event)"
            />
            <div class="image-overlay"></div>
            <span class="badge price-badge position-absolute top-0 start-0 m-3"
                  [ngClass]="{'badge-success free': course.price === 0, 'badge-primary paid': course.price > 0}">
              <i class="bi me-1" [ngClass]="{'bi-gift-fill': course.price === 0, 'bi-tag-fill': course.price > 0}"></i>
              {{ course.price === 0 ? 'مجاني' : course.price + ' جنيه' }}
            </span>
          </div>
        </div>
        <div class="col-lg-7 col-md-6">
          <div class="card-body p-4 p-lg-5">
            <div class="course-header mb-4">
              <h2 class="card-title course-title mb-3">{{ course.title }}</h2>
            </div>
            
            <div class="course-info">
              <div class="info-item mb-3">
                <h5 class="info-label">
                  <i class="bi bi-file-text me-2"></i>
                  الوصف:
                </h5>
                <p class="info-content">{{ course.description }}</p>
              </div>
              
              <div class="info-item mb-3">
                <h5 class="info-label">
                  <i class="bi bi-calendar3 me-2"></i>
                  السنة:
                </h5>
                <p class="info-content">{{ course.year }}</p>
              </div>
              
              <div class="info-item mb-4">
                <h5 class="info-label">
                  <i class="bi bi-tag me-2"></i>
                  السعر:
                </h5>
                <p class="info-content price-info">
                  <span [ngClass]="{'text-success': course.price === 0, 'text-primary': course.price > 0}">
                    {{ course.price === 0 ? 'مجاني' : course.price + ' جنيه' }}
                  </span>
                </p>
              </div>
            </div>
            
            <div class="course-actions d-flex flex-column gap-3">
              <a [routerLink]="['/courses', course.id, 'content']" class="btn btn-enroll btn-lg">
                <i class="bi bi-play-circle me-2"></i>
                الذهاب الى الكورس
              </a>
              <a [routerLink]="['/courses']" class="btn btn-secondary btn-lg">
                <i class="bi bi-arrow-right me-2"></i>
                رجوع للكورسات
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  } @else if (!isLoading && !errorMessage) {
    <div class="no-course text-center my-5">
      <div class="no-course-content">
        <i class="bi bi-exclamation-circle no-course-icon"></i>
        <h3 class="no-course-title">الكورس غير موجود</h3>
        <p class="no-course-text">عذراً، لم يتم العثور على الكورس المطلوب</p>
        <a [routerLink]="['/courses']" class="btn btn-primary mt-3">
          <i class="bi bi-arrow-right me-2"></i>
          العودة للكورسات
        </a>
      </div>
    </div>
  }
</div>